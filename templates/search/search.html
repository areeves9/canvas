{% extends 'base.html' %}

{% load bootstrap3 %}

{% bootstrap_css %}
{% bootstrap_javascript %}

{% load static %}

{% block content %}

<div class="container">
  <form id="search-bar">
    <div class="row">
      <div class="col-md-6  col-md-offset-3">
        <div class="input-group">
          <input type="text" name="q" id="q" autocomplete="on" placeholder="SEARCH" class="form-control">
          <span class="input-group-btn">
            <button type="submit" class="btn btn-default">
              <i class="glyphicon glyphicon-search"></i>
            </button>
          </span>
        </div>
      </div>
    </div>
  </form>


    {% if query %}
    <div class="row">
    <h3>Results</h3>
    {% for result in page.object_list %}
      <div class="media">
        <div class="media-left">
          {% if result.object.photo_url %}
          <img src="{{ result.object.photo_url }}" class="media-object" style="width:60px">
          {% elif result.object.photo %}
          <img src="{{ result.object.photo.url }}" class="media-object" style="width:60px">
          {% else %}
          <img src="http://via.placeholder.com/60x60" class="media-object">
          {% endif %}

        </div>
        <div class="media-body">
          <h4 class="media-heading">
            <a href="{{ result.object.get_absolute_url }}">
              {{ result.object.title }}
              {{ result.object.name }}
            </a>
          </h4>
          <p class="text-left">
            {% load get_class %}
            {% if result.object|get_class == 'Strain' %}
            (Strain)
            {% elif result.object|get_class == 'Review' %}
            (Review)
            {% endif %}
          </p>
          <p>
            {% if result.object.content %}
            {{ result.object.content }}
            {% elif result.object.summary %}
            {{ result.object.summary }}
            {% endif %}
          </p>
          <p>{{ result.object.user }}</p>
        </div>
      </div> <!--/.media-->

  {% empty %}
    <p>No results found.</p>
  {% endfor %}

  {% if page.has_previous or page.has_next %}
  <div>
    {% if page.has_previous %}<a href="?q={{ query }}&amp;page={{ page.previous_page_number }}">{% endif %}&laquo; Previous{% if page.has_previous %}</a>{% endif %}
    |
    {% if page.has_next %}<a href="?q={{ query }}&amp;page={{ page.next_page_number }}">{% endif %}Next &raquo;{% if page.has_next %}</a>{% endif %}
  </div>
  {% endif %}
  {% else %}
    {# Show some example queries to run, maybe query syntax, something else? #}
  {% endif %}
  </div> <!--/.row-->
</div> <!--/.container-->


{% endblock %}
