{% extends "base.html" %}
{% block head_title %} Strains | {{ block.super }}{% endblock head_title %}

{% block content %}
<div class="container">
  <h3 class="mt-5">Strains</h3>
  <p class="text-secondary">Page {{ strains.number }} of {{ strains.paginator.num_pages }}</p>
  <div class="row">
    {% include "reviews/strain_list_ajax.html" %}
  </div>

  <nav aria-label="Page navigation example">
    <ul class="pagination">
      {% if strains.has_previous %}
      <li class="page-item"><a class="page-link" href="?page={{ strains.previous_page_number }}"><span aria-hidden="true">&laquo;</span>
        <span class="sr-only">Previous</span></a></li>
      {% endif %}
      <li class="page-item"><a class="page-link" href="?page={{ strains.number }}">{{ strains.number }}</a></li>
      {% if strains.has_next %}
      <li class="page-item"><a class="page-link" href="?page={{ strains.next_page_number }}"><span aria-hidden="true">&raquo;</span>
        <span class="sr-only">Next</span></a></li>
      {% endif %}
    </ul>
  </nav>
</div>

  
{% endblock %}



<!-- {% block domready %}
var page = 1;
var empty_page = false;
var block_request = false;
$(window).scroll(function() {
  var margin = $(document).height() - $(window).height() - 200;
  if  ($(window).scrollTop() > margin && empty_page == false && block_request == false){
    block_request = true;
    page += 1;
    $.get('?page=' + page, function(data) {
    if(data == '') {
      empty_page = true;
    } else {
      block_request = false;
      $('#strain-list').append(data);
           }
         });
       }
     });
{% endblock %} -->
